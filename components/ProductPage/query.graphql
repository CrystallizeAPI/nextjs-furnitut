query FetchProduct(
    $path: String!
    $publicationState: [PublicationState]
    $fallbackPriceVariant: String!
    $selectedPriceVariant: String!
    $language: [TenantLanguage] = en
) {
    browse {
        product(path: $path, language: $language, publicationState: $publicationState) {
            hits {
                name
                path
                topics(onlyLeafName: true, leafOnly: true)

                description(format: json)
                details {
                    title
                    description
                }
                breadcrumbs(withShortcuts: false) {
                    name
                    path
                }
                downloads {
                    title
                    description
                    files {
                        url
                        createdAt
                        title
                    }
                }
                brand {
                    items {
                        id
                        name
                        ... on brand {
                            component_name
                            logo {
                                url
                                variants(maxWidth: 200) {
                                    url
                                    height
                                    width
                                }
                            }
                        }
                    }
                }

                story {
                    title
                    body(format: json)
                    images {
                        ...showCaseImage
                    }
                }
                relatedProducts {
                    items(language: $language) {
                        ... on product {
                            path
                            name
                            topics(onlyLeafName: true, leafOnly: true)

                            variants {
                                firstImage {
                                    url
                                    variants(types: ["avif"], maxWidth: 100) {
                                        url
                                        width
                                        height
                                    }
                                }
                            }
                            defaultVariant {
                                fallbackPriceVariant: priceVariants(key: $fallbackPriceVariant)
                                selectedPriceVariant: priceVariants(key: $selectedPriceVariant)
                                defaultPrice: priceVariants(key: $selectedPriceVariant)
                                firstImage {
                                    url
                                    variants(types: ["avif"], maxWidth: 500) {
                                        url
                                        width
                                        height
                                    }
                                }
                            }
                        }
                    }
                }

                variants {
                    ...productVariant
                }

                meta {
                    ...metadata
                }
            }
        }
    }
}

fragment productVariant on ProductVariantForProduct {
    name
    sku
    priceVariants
    attributes
    fallbackPriceVariant: priceVariants(key: $fallbackPriceVariant)
    selectedPriceVariant: priceVariants(key: $selectedPriceVariant)
    description {
        extraDescription
    }
    matchingProducts {
        variants(language: $language) {
            sku
            name
            product {
                path
            }
            fallbackPriceVariant: priceVariants(key: $fallbackPriceVariant)
            selectedPriceVariant: priceVariants(key: $selectedPriceVariant)
            firstImage {
                url
                variants(maxWidth: 200, types: ["avif"]) {
                    url
                    height
                    width
                }
            }
        }
    }
    dimensions {
        depth
        depthUnit
        height
        heightUnit
        width
        widthUnit
        weight
        weightUnit
    }
    images {
        url
        altText
        width
        height
        variants(maxWidth: 800, types: ["avif"]) {
            url
            width
            height
        }
        ogVariants: variants(minWidth: 800, maxWidth: 1500, types: ["webp"]) {
            url
            width
            height
        }
    }
}
