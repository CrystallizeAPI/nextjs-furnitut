query SearchCategory(
    $path: String!
    $browsePath: String!
    $limit: Int!
    $skip: Int = 0
    $filters: TenantFilter
    $sorting: TenantSort
    $boundaries: [Int]!
    $publicationState: [PublicationState]
    $language: [TenantLanguage] = en
    $selectedPriceVariant: String = "default"
    $fallbackPriceVariant: String = "default"
) {
    filters: search(
        path: $path
        language: $language
        facets: {
            price_default: { boundaries: $boundaries, key: "price" }
            parentPaths: { key: "parentPaths", limit: 10 }
        }
    ) {
        summary {
            price: facets(key: "price")
            parentPaths: facets(key: "parentPaths")
        }
    }
    search(
        path: $path
        language: $language
        publicationState: $publicationState
        pagination: { limit: $limit, skip: $skip }
        filters: $filters
        sorting: $sorting
    ) {
        summary {
            totalHits
            hasMoreHits
            hasPreviousHits
        }
        hits {
            name
            shape
            ... on product {
                id
                name
                path
                description(format: json)
                topics(onlyLeafName: true, leafOnly: true)
                defaultVariant {
                    sku
                    defaultPrice: priceVariants(key: $selectedPriceVariant)
                    fallbackPriceVariant: priceVariants(key: $fallbackPriceVariant)
                    selectedPriceVariant: priceVariants(key: $selectedPriceVariant)
                    firstImage {
                        url
                        altText
                        focalPoint
                        variants(maxWidth: 500, types: ["avif"]) {
                            url
                            width
                            height
                        }
                    }
                }
                variants {
                    sku
                    isDefault
                    name
                    firstImage {
                        url
                        altText
                        focalPoint
                        variants(maxWidth: 100, types: ["avif"]) {
                            url
                            width
                            height
                        }
                    }
                }
            }
        }
    }
    browse {
        category(path: $browsePath, language: $language, publicationState: $publicationState) {
            hits {
                name
                breadcrumbs {
                    name
                    path
                    id
                }
                blocks {
                    storySlider {
                        ...storySlider
                    }
                    banner {
                        ...banner
                    }
                    featureHighlights {
                        ...featureHighlights
                    }
                    productSlider {
                        ...productSlider
                    }
                    pictureGrid {
                        ...pictureGrid
                    }
                    categorySlider {
                        ...categorySlider
                    }
                }
                children {
                    hits {
                        shape
                        ... on category {
                            id
                            name
                            path
                            image {
                                url
                                altText
                                variants(maxWidth: 200, types: ["avif"]) {
                                    url
                                    width
                                    height
                                }
                            }
                        }
                    }
                }
                meta {
                    ...metadata
                }
            }
        }
    }
}

query FetchItemShape($path: String!, $language: [TenantLanguage] = en) {
    search(path: $path, language: $language) {
        hits {
            id
            name
            path
            shape
        }
    }
}
